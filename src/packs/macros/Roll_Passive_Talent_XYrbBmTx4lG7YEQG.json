{
  "_id": "XYrbBmTx4lG7YEQG",
  "author": "MJAZjdKh3QKREKG2",
  "command": "/* ==========\n* MACRO: Roll Passive Talent\n* VERSION: 1.0\n* AUTHOR: Robak132\n* DESCRIPTION: Allows for easier interaction with passive talents like Sixth Sense and Trapper. Uses features of GM Toolkit by Jagusti.\n========== */\n\npassive_talent_macro(\n'Szósty Zmysł' /* <-- Write talent name here */,\n'Intuicja'      /* <-- Write skill name here */\n);\n\nfunction passive_talent_macro(talent, skill) {\n  const targetGroup = game.actors.filter(a => {\n    return a.hasPlayerOwner && a.type !== 'vehicle' && a.itemCategories.talent.find(i => i.name === talent) !== undefined;\n  }).map(g => g.uuid);\n\n  if (targetGroup.length === 0) {\n    ui.notifications.error(game.i18n.localize('MACROS-AND-MORE.Message.MakeSecretGroupTest.NoGroup'), {console: true});\n    return;\n  }\n\n  const testOptions = {\n    bypass: true,\n    rollMode: 'blindroll',\n    fallback: true,\n    difficulty: 'challenging',\n    testModifier: 0,\n    targetGroup: targetGroup,\n  };\n\n  if (!game.user.isGM) {\n    ui.notifications.error(game.i18n.localize('MACROS-AND-MORE.Message.MakeSecretGroupTest.NoPermission'));\n    return;\n  }\n\n  return game.gmtoolkit.grouptest.run(skill, testOptions);\n}",
  "flags": {
    "wfrp4e-macros-and-more": {
      "version": "1.0"
    }
  },
  "folder": null,
  "img": "modules/wfrp4e-macros-and-more/assets/icons/roll-passive-talent.svg",
  "name": "Roll Passive Talent",
  "scope": "global",
  "type": "script",
  "_key": "!macros!XYrbBmTx4lG7YEQG"
}
